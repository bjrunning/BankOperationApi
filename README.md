# Тестовое задание Effective Mobile

## Требования к запуску

Для запуска понадобятся:

- [JDK 1.8](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)
- [Java 17](https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html)
- [Maven 3](https://maven.apache.org)

## Инструкция по запуску

На локальной машине можно запустить сервер несколькими способами:

- Выполнить метод `main` расположенный в `src/main/java/com/example/demo/DemoApplication.java` из IDE.

- Использовать плагин  [Spring Boot Maven plugin](https://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-maven-plugin.html):

```shell
mvn spring-boot:run
```
## Требования к заданию:

### Функциональные требования:
- В системе есть пользователи, у каждого пользователя есть строго один “банковский аккаунт”. У пользователя также есть телефон и email. Телефон и или email должен быть минимум один. На “банковском счету” должна быть какая-то изначальная сумма. Также у пользователя должна быть указана дата рождения и ФИО.
- Для простоты будем считать что в системе нет ролей, только обычные клиенты. Пусть будет служебный апи (с открытым доступом), через который можно заводить новых пользователей в системе, указав логин, пароль, изначальную сумму, телефон и email (логин, телефон и email не должны быть заняты). 
- Баланс счета клиента не может уходит в минус ни при каких обстоятельствах.
- Пользователь может добавить/сменить свои номер телефона и/или email, если они еще не заняты другими пользователями.
- Пользователь может удалить свои телефон и/или email. При этом нельзя удалить последний.
- Остальные данные пользователь не может менять.
- Сделать АПИ поиска. Искать можно любого клиента. Должна быть фильтрация и пагинация/сортировка. Фильтры:
  - Если передана дата рождения, то фильтр записей, где дата рождения больше чем переданный в запросе.
  - Если передан телефон, то фильтр по 100% сходству.
  - Если передано ФИО, то фильтр по like форматом ‘{text-from-request-param}%’
  - Если передан email, то фильтр по 100% сходству. 
-  Доступ к АПИ должен быть аутентифицирован (кроме служебного апи для создания новых клиентов).
- Раз в минуту баланс каждого клиента увеличиваются на 5% но не более 207% от начального депозита.
- Реализовать функционал перевода денег с одного счета на другой. Со счета аутентифицированного пользователя, на счёт другого пользователя.
- Сделать все необходимые валидации и потокобезопасной.


### Нефункциональные требования:
- Добавить OpenAPI/Swagger
- Добавить логирование
- Аутентификация через JWT.
- Нужно сделать тесты на покрытие функционала трансфера денег.

## Стек:
 - Spring Boot 3
 - PostgreSQL
 - AspectJ
 - Maven
 - REST API
 - Redis
 - MapStruct
 - Lombok
